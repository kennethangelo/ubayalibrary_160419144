<?php

$data = array(
    array("id" => 1, "book_id" => 1, "user" => ["username" => "kennethangelo", "name" => "Kenneth", "photo_url" => "https://images.unsplash.com/photo-1570295999919-56ceb5ecca61?ixlib=rb-1.2.1&ixid=MnwxMjA3fDB8MHxzZWFyY2h8OXx8bWFsZXxlbnwwfHwwfHw%3D"], "reviewed_date" => "2020-01-02", "stars" => 4.5, "review_content" => "Bukunya bagus sekali! Aku terharu."),
    array("id" => 2, "book_id" => 2, "user" => ["username" => "ciera080101", "name" => "Sierra Doe", "photo_url" => "https://pbs.twimg.com/media/FKgEoonXIAApwdS.jpg"], "reviewed_date" => "2020-01-05", "stars" => 3.5, "review_content" => "Eh. Aku suka tapi ada beberapa kekurangan."),
    array("id" => 3, "book_id" => 3, "user" => ["username" => "taylorswift13", "name" => "Taylor Swift", "photo_url" => "https://i.pinimg.com/originals/95/8d/aa/958daae8d0bc682cb71e5ce32ec927d5.jpg"], "reviewed_date" => "2020-04-23", "stars" => 5, "review_content" => "Bagus sekali!"),
    array("id" => 4, "book_id" => 4, "user" => ["username" => "arianagrande", "name" => "Ariana Grande",  "photo_url" => "https://data.whicdn.com/images/340331006/original.jpg"], "reviewed_date" => "2020-05-17", "stars" => 4, "review_content" => ""),

    array("id" => 5, "book_id" => 4, "user" => ["username" => "ciera080101", "name" => "Sierra Doe", "photo_url" => "https://pbs.twimg.com/media/FKgEoonXIAApwdS.jpg"], "reviewed_date" => "2020-07-18", "stars" => 4.5, "review_content" => "Bagus. Aku suka"),
    array("id" => 6, "book_id" => 2, "user" => ["username" => "johnsonmike", "name" => "Mike Johnson", "photo_url" => "https://publish.one37pm.net/wp-content/uploads/2021/11/Brantly.eth_.png"], "reviewed_date" => "2020-08-03", "stars" => 5, "review_content" => "Bagus sekali!"),

    array("id" => 7, "book_id" => 5, "user" => ["username" => "kennethangelo", "name" => "Kenneth", "photo_url" => "https://images.unsplash.com/photo-1570295999919-56ceb5ecca61?ixlib=rb-1.2.1&ixid=MnwxMjA3fDB8MHxzZWFyY2h8OXx8bWFsZXxlbnwwfHwwfHw%3D"], "reviewed_date" => "2021-11-22", "stars" => 4, "review_content" => "Bagus. Aku suka"),
    array("id" => 8, "book_id" => 3, "user" => ["username" => "ciera080101", "name" => "Sierra Doe", "photo_url" => "https://pbs.twimg.com/media/FKgEoonXIAApwdS.jpg"], "reviewed_date" => "2021-10-12", "stars" => 4.5, "review_content" => "Bagus. Aku suka"),
    array("id" => 9, "book_id" => 1, "user" => ["username" => "arianagrande", "name" => "Ariana Grande",  "photo_url" => "https://data.whicdn.com/images/340331006/original.jpg"], "reviewed_date" => "2021-11-22", "stars" => 4, "review_content" => "Bagus. Aku suka"),

    array("id" => 10, "book_id" => 1, "user" => ["username" => "ciera080101", "name" => "Sierra Doe", "photo_url" => "https://pbs.twimg.com/media/FKgEoonXIAApwdS.jpg"], "reviewed_date" => "2021-12-02", "stars" => 2, "review_content" => "Buku ini tidak direkomendasikan untuk siapapun."),
    array("id" => 11, "book_id" => 3, "user" => ["username" => "johnsonmike", "name" => "Mike Johnson", "photo_url" => "https://publish.one37pm.net/wp-content/uploads/2021/11/Brantly.eth_.png"], "reviewed_date" => "2022-01-27", "stars" => 4.5, "review_content" => "Buku ini sangat direkomendasikan untuk siapapun."),
    array("id" => 12, "book_id" => 5, "user" => ["username" => "taylorswift13", "name" => "Taylor Swift", "photo_url" => "https://i.pinimg.com/originals/95/8d/aa/958daae8d0bc682cb71e5ce32ec927d5.jpg"], "reviewed_date" => "2022-01-30", "stars" => 3, "review_content" => "Bagus."),

    array("id" => 13, "book_id" => 3, "user" => ["username" => "kennethangelo", "name" => "Kenneth", "photo_url" => "https://images.unsplash.com/photo-1570295999919-56ceb5ecca61?ixlib=rb-1.2.1&ixid=MnwxMjA3fDB8MHxzZWFyY2h8OXx8bWFsZXxlbnwwfHwwfHw%3D"], "reviewed_date" => "2022-02-02", "stars" => 4, "review_content" => "Bagus. Aku suka"),
    array("id" => 14, "book_id" => 5, "user" => ["username" => "ciera080101", "name" => "Sierra Doe", "photo_url" => "https://pbs.twimg.com/media/FKgEoonXIAApwdS.jpg"], "reviewed_date" => "2022-02-20", "stars" => 5, "review_content" => "Bagus. Aku suka sekali penataan kata penulis"),
    array("id" => 15, "book_id" => 3, "user" => ["username" => "taylorswift13", "name" => "Taylor Swift", "photo_url" => "https://i.pinimg.com/originals/95/8d/aa/958daae8d0bc682cb71e5ce32ec927d5.jpg"], "reviewed_date" => "2022-03-01", "stars" => 5, "review_content" => ""),
    array("id" => 16, "book_id" => 2, "user" => ["username" => "arianagrande", "name" => "Ariana Grande",  "photo_url" => "https://data.whicdn.com/images/340331006/original.jpg"], "reviewed_date" => "2022-03-28", "stars" => 5, "review_content" => ""),
);

function searchReviews($bookID, $data)
{
    $res = [];
    foreach ($data as $key => $val) {
        if ($val['book_id'] == $bookID && $val['review_content'] !== "") {
            $res[] = $data[$key];
        }
    }
    return $res;
}

if (isset($_GET['bookID'])) {
    $data = searchReviews($_GET['bookID'], $data);
}

echo json_encode($data);
